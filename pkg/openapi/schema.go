// Package openapi provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.4.1 DO NOT EDIT.
package openapi

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
