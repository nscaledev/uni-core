// Package openapi provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.4.1 DO NOT EDIT.
package openapi

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
	"XBIf9/f/CQAA//97aWBTNSYAAA==",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
