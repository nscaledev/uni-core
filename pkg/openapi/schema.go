// Package openapi provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.4.1 DO NOT EDIT.
package openapi

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
	"RieL5NX8dP4qUnApemw2/wkAAP//zsQREOocAAA=",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
