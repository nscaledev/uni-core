// Package openapi provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.4.1 DO NOT EDIT.
package openapi

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
