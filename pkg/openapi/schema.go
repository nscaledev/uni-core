// Package openapi provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.4.1 DO NOT EDIT.
package openapi

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
	"jdU7JQAA",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
