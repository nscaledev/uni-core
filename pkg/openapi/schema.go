// Package openapi provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.4.1 DO NOT EDIT.
package openapi

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
	"uMTWOyUAAA==",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
