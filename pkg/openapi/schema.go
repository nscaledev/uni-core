// Package openapi provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.4.1 DO NOT EDIT.
package openapi

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
	"WFsdHQAA",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
